<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Quizzone | Progress</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0; font-family:"Segoe UI",Arial;
    background:#eef3ff;
}

.progress-box{
    width:90%; max-width:900px;
    margin:60px auto; background:white;
    padding:25px; border-radius:14px;
    box-shadow:0 4px 20px rgba(0,0,0,0.2);
}

h2 { color:#007bff; }

.stat-block{
    margin-top:25px;
    padding:15px; background:#f4f8ff;
    border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1);
}

.bar{
    width:100%; height:14px; background:#ddd;
    border-radius:10px; margin-top:6px;
}
.fill{
    height:100%; width:0%; background:#007bff;
    border-radius:10px; transition:0.6s;
}

.score-item{
    padding:12px; background:#eef7ff;
    border-radius:10px; margin:10px 0;
}
</style>
<link rel="manifest" href="/Quizzone/manifest.json">
<meta name="theme-color" content="#007bff">
</head>
<script src="/Quizzone/Global/loader.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/MITLicense-Term-of-Use--Privacy.min.js"></script>
<script src="https://akshat-881236.github.io/sitemapjs/breadcrumb.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/redirect.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/akshatnetworkhub.min.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/tracker.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/trackermeta.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/ui.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/index.js"></script>
<script src="https://akshat-881236.github.io/TrackerJS/akshat-add-nav.js"></script>
<body onload="pushData()">
<!-- GLOBAL HEADER + FOOTER -->
<script src="/Quizzone/Global/loader.js"></script>

<div class="progress-box">

    <h2>Your Learning Progress</h2>

    <!-- BLOG PROGRESS -->
    <div class="stat-block">
        <h3>Blogs Completed</h3>
        <p id="blogText"></p>
        <div class="bar"><div class="fill" id="blogFill"></div></div>
    </div>

    <!-- COMPETENCY TESTS -->
    <div class="stat-block">
        <h3>Competency Tests Completed</h3>
        <p id="compText"></p>
        <div class="bar"><div class="fill" id="compFill"></div></div>
    </div>

    <!-- QUIZ SCORES -->
    <div class="stat-block">
        <h3>Quiz Scores</h3>
        <div id="scoreList"></div>
    </div>

</div>

<script>
let user = JSON.parse(localStorage.getItem("ActiveQuizzoneUser"));
if(!user){ alert("Please login first!"); window.location.href="index.html"; }

// BLOG PROGRESS
let blogs = user.progress.blogs || 0;
document.getElementById("blogText").innerText = blogs + " Topics Read";
document.getElementById("blogFill").style.width = Math.min(blogs*20, 100) + "%";

// COMPETENCY TESTS
let comp = user.progress.compTests || 0;
document.getElementById("compText").innerText = comp + " Tests Done";
document.getElementById("compFill").style.width = Math.min(comp*20, 100) + "%";

// QUIZ SCORES
let scoreBox = document.getElementById("scoreList");
let scores = user.scores || {};

if(Object.keys(scores).length === 0){
    scoreBox.innerHTML = "<p>No quizzes attempted yet.</p>";
} else {
    for(let t in scores){
        scoreBox.innerHTML += `
            <div class="score-item">
                <b>${t.replace(/_/g," â†’ ")}</b><br>
                Score: ${scores[t]}
            </div>`;
    }
}

fetch(window.location.href)
  .then(res => {
    if (!res.ok) window.location.href = "/Quizzone/Errors/404.htm";
  })
  .catch(() => window.location.href = "/Quizzone/Errors/404.htm");
</script>
<script src="/Quizzone/pwa.js"></script>
</body>
</html>